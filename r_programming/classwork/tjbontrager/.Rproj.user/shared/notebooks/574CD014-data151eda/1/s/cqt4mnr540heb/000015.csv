"0","library(tidyverse)"
"0","library(rvest)"
"0",""
"0","# scrape_salary <- function(state_name){"
"0","#   "
"0","#   message(glue::glue(""Scraping {state_name}!""))"
"0","#   "
"0","#   Sys.sleep(5)"
"0","#   "
"0","#   url <- glue::glue(""https://www.payscale.com/college-salary-report/best-schools-by-state/bachelors/{state_name}"")"
"0","# "
"0","#   raw_table <- url %>% "
"0","#     read_html() %>% "
"0","#     html_table(fill = TRUE) %>% "
"0","#     .[[1]]"
"0","#   "
"0","# "
"0","#   raw_table %>% "
"0","#     set_names(nm = c(""rank"", ""name"", ""type"", ""early_career_pay"", ""mid_career_pay"","
"0","#                      ""make_world_better_percent"", ""stem_percent"")) %>% "
"0","#     as_tibble() %>% "
"0","#     mutate(rank = str_remove(rank, ""Rank:""),"
"0","#            name = str_remove(name, ""School Name:""),"
"0","#            type = str_remove(type, ""School Type:""),"
"0","#            early_career_pay = parse_number(early_career_pay),"
"0","#            mid_career_pay = str_remove(mid_career_pay, ""Mid-Career Pay:""),"
"0","#            mid_career_pay = parse_number(mid_career_pay),"
"0","#            make_world_better_percent = parse_number(make_world_better_percent),"
"0","#            stem_percent = parse_number(stem_percent),"
"0","#            state_name = str_to_title(state_name)"
"0","#     ) %>% "
"0","#     select(rank, name, state_name, everything(), -type)"
"0","# }"
"0","#   "
"0","# all_states <- tolower(state.name) %>%"
"0","#   str_replace("" "", ""-"") %>% "
"0","#   map(scrape_salary) %>% "
"0","#   bind_rows() %>% "
"0","#   mutate(name = str_replace(name, ""A & M"", ""A&M""))"
"0","# "
"0","# all_states %>% "
"0","#   write_csv(here::here(""2020"", ""2020-03-10"", ""salary_potential.csv""))"
"0",""
